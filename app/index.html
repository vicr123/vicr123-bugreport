<!DOCTYPE >
<html>
    <head>
        <title>vicr123 Bug Reporting</title>
        <link rel="stylesheet" href="/contemporary.css" />
        <link rel="stylesheet" href="/app/app.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="HandheldFriendly" content="true">
        <link rel="shortcut icon" href="/icon.png" />
        <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    
        <script src="/jquery.i18n/libs/CLDRPluralRuleParser/src/CLDRPluralRuleParser.js"></script>
        <script src="/jquery.i18n/src/jquery.i18n.js"></script>
        <script src="/jquery.i18n/src/jquery.i18n.messagestore.js"></script>
        <script src="/jquery.i18n/src/jquery.i18n.fallbacks.js"></script>
        <script src="/jquery.i18n/src/jquery.i18n.language.js"></script>
        <script src="/jquery.i18n/src/jquery.i18n.parser.js"></script>
        <script src="/jquery.i18n/src/jquery.i18n.emitter.js"></script>
        <script src="/jquery.i18n/src/jquery.i18n.emitter.bidi.js"></script>
        <script src="/i18n/i18n.js"></script>
        
        <script>if (window.module) module = window.module;</script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.7.6/showdown.min.js"></script>
        <script src="/app/xss.js" type="text/javascript"></script>
        <script src="/contemporary.js"></script>
        <script src="/app/app.js"></script>
        <script src="/autosize.min.js"></script>
    </head>
    <body onload="load()">
        <div class="blanker" id="blanker"></div>
        <div class="mainHeader" id="mainHeader">
            <div class="headerProject">
                <img class="smileIcon" src="/images/smile.png">
                <div class="headerTitle" data-i18n="bug-reporting">Bug Reporting</div>
                <span class="admin">Administrator</span>
            </div>
            <div id="headerButtons" class="headerButtons">
                <div class="headerItem" data-i18n="settings" onclick="showDialog('dlgSettings')">
                    Settings
                </div>
                <div class="headerItem" data-i18n="file-new-ticket" onclick="fileBug()">
                    File New Ticket
                </div>
                <div class="headerItem" id="userSettings" onclick="userSettings()" data-i18n="log-in">
                    Log In
                </div>
                <div class="headerItem" id="verificationNeeded" onclick="showDialog('dlgVerificationNeeded')" data-i18n="email-verification-needed">
                    Email Verification Needed
                </div>
            </div>
        </div>
        
        <div class="landing" id="initialLanding">
            <h1 data-i18n="bug-reporting">Bug Reporting</h1>
            <div class="loader"></div>
            <p id="loadingStatus" data-i18n="loading-assets">Loading assets...</p>
        </div>
        <div class="content projects" id="contentContainer">
            <div id="projects" class="list">
                
            </div>
            <div id="bugs" class="list" style="position: relative;">
                <div class="coverLoader" id="coverLoaderBugs">
                    <div class="loader"></div>
                </div>
            </div>
            <div id="bugInfo" class="panel">
                <div id="bugCover">
                    <h1 data-i18n="welcome">Welcome!</h1>
                    <img src="/images/landing.svg" />
                    <p data-i18n="browse-prompt">Browse tickets using the list on the left.</p>
                    <div class="buttonBar">
                        <a href="#" class="button" onclick="fileBug()" data-i18n="file-new-ticket" >File New Ticket</a>
                    </div>
                </div>
                <div class="bugTitleWrapper">
                    <div class="parentButtonTitle" onclick="$('#contentContainer').removeClass('bugInfo');$('#contentContainer').addClass('bugs');">
                        <img src="/images/arrow-left.svg" />
                    </div>
                    <h2 id="bugTitle">Ticket Title</h2>
                </div>
                <div id="bugContents">
                    <div class="bugTop" id="bugTop">
                            <div id="bugMetadata">
                                <table>
                                    <tbody>
                                        <tr>
                                            <th data-i18n="importance">Importance</th>
                                            <td id="bugImportance"></td>
                                        </tr>
                                        <tr>
                                            <th data-i18n="status">Status</th>
                                            <td id="bugOpen"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                    </div>
                    <div class="bugBody" id="bugBodyWrapper">
                        <div id="bugBody" class="bugContents"></div>
                        <div class="attachments" id="bugAttachments"></div>
                        <div class="bugBodyMetadata">
                            <img id="bugProfilePicture" class="small profile" />
                            <span id="bugReporter"></span> &bullet; 
                            <span id="bugTimestamp"></span>
                        </div>
                    </div>
                    <div id="bugComments">
                    </div>
                    <div style="display: flex; align-items: center; justify-content: center;" id="bugLoader">
                        <div class="loader"></div>
                    </div>
                    <div id="commentsWrapper">
                        <div id="commentsBox">
                            <input type="file" id="commentsFileUploader" multiple style="display: none" onchange="uploadNewCommentAttachment(this.files)"/>
                            <div class="dropTarget" id="commentsDropTarget">
                                <h1 data-i18n="drop-files">Drop files</h1>
                                <p data-i18n="drop-files-prompt">Drop files here to attach them to this comment</p>
                            </div>
                            <textarea class="autogrow" id="commentText" placeholder="Write a comment..."></textarea>
                        </div>
                        <div id="bugActions">
                            <a class="button flat commentButton" onclick="patchCurrentBug({isOpen: false})" id="btnCloseBug"><img src="/images/dialog-ok.svg" /><span data-i18n="close">Close</span></a>
                            <a class="button flat commentButton" onclick="patchCurrentBug({isOpen: true})" id="btnReopenBug"><img src="/images/start-over.svg"/><span data-i18n="reopen">Reopen</span></a>
                            <span class="spacer"></span>
                                <a href="#" class="flat button" onclick="document.getElementById('commentsFileUploader').click();"><img src="/images/mail-attachment.svg" alt="Attach File"/></a>
                                <a class="button" onclick="sendComment()" /><img src="/images/mail-send.svg"/><span data-i18n="send">Send</span></a>
                        </div>
                    </div>
                    <div class="uploads" id="newCommentFileUploads">
                </div>
            </div>
        </div>
        
        <div class="newBug" id="newBug">
            <div class="dropTarget" id="newBugDropTarget">
                <h1 data-i18n="drop-files">Drop files</h1>
                <p data-i18n="drop-files-prompt">Drop files here to attach them to this ticket</p>
            </div>
            <h1 id="newBugProjectName">File a new ticket in $1</h1>
            <input type="text" id="newBugTitle" placeholder="Ticket Title"/>
            <textarea id="newBugContent" placeholder="Describe what you think needs to be changed"></textarea>
            <a class="button list flat" id="bugSettingsButton" onclick="$('#newBugSettings').addClass('show');">
                <div>
                    <h3 data-i18n="more-settings">More Settings</h3>
                    <p data-i18n="more-settings-supplementary">Importance, Visibility...</p>
                </div>
            </a>
            <input type="file" id="newBugFileUploader" multiple style="display: none" onchange="uploadNewBugAttachment(this.files)"/>
            <div class="uploads" id="newBugFileUploads">
            </div>
            <div class="buttonBar">
                <a href="#" class="button" onclick="cancelFileBug()" data-i18n="cancel">Cancel</a>
                <span class="spacer"></span>
                <a href="#" class="flat button" onclick="document.getElementById('newBugFileUploader').click();"><img src="/images/mail-attachment.svg" alt="Attach File"/></a>
                <a href="#" class="button" onclick="doFileBug()" data-i18n="file-ticket">File Ticket</a>
            </div>
        </div>
        <div class="newBug" id="newBugSettings">
            <h1 data-i18n="extra-settings">Extra Settings</h1>
            <p data-i18n="extra-settings-description">Set extra properties of this ticket</p>
            <div class="newBugSetting">
                <h3 data-i18n="importance">Importance</h3>
                <p data-i18n="importance-description">How important is this ticket? Is it a feature request, or is it a grave security issue?</p>
                <select id="newBugImportance">
                    <option value="0" data-i18n="fatal">Fatal</option>
                    <option value="1" data-i18n="critical">Critical</option>
                    <option value="2" data-i18n="high">High</option>
                    <option value="3" data-i18n="normal" selected>Normal</option>
                    <option value="4" data-i18n="low">Low</option>
                    <option value="5" data-i18n="trivial">Trivial</option>
                    <option value="6" data-i18n="feature-request">Feature Request</option>
                </select>
            </div>
            <div class="newBugSetting">
                <h3 data-i18n="privacy">Privacy</h3>
                <p data-i18n="privacy-description">Does this ticket contain a security issue?</p>
                <input type="radio" id="publicBug" name="newBugSecurity" checked/><label for="publicBug" data-i18n="privacy-public">Make Public</label>
                <input type="radio" id="privateBug" name="newBugSecurity"/><label for="privateBug" data-i18n="privacy-private">Keep Private</label>
                <p class="error" data-i18n="privacy-warning">Only set this to "Keep Private" if you are reporting a security issue.</p>
            </div>
            <div class="buttonBar">
                <span class="spacer"></span>
                <a href="#" class="button" onclick="$('#newBugSettings').removeClass('show');" data-i18n="done">Done</a>
            </div>
        </div>

        <div class="toast" id="toast">
            <span id="toast-header">Toast Header</span>
            <span id="toast-contents">Toast Contents</span>
            <span id="toast-buttons">
                
            </span>
        </div>
        <div class="cxMenu" id="cxMenu">
            <div class="menuHeader">Menu Header</div>
            <div class="menuItem">Menu Item 1</div>
            <div class="menuItem">Menu Item 2</div>
            <div class="menuSeperator"></div>
            <div class="menuItem">Menu Item 3</div>
            <div class="menuItem">Menu Item 4</div>
            <div class="menuItem">Menu Item 5</div>
        </div>

        <div class="dialog" id="dlgLoadFail">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="load-error">Load Error</h1>
            <p data-i18n="load-error-description">Loading the Bug Reporting tool failed. This might be because of a server error, or it may be because of an unstable internet connection.</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="location.reload();">Reload</a>
            </div>
        </div>
        <div class="dialog" id="dlgConnectFail">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="connection-error">Connection Error</h1>
            <p data-i18n="connection-error-description">Couldn't connect to the server.</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="location.reload();">Reload</a>
            </div>
        </div>
        <div class="dialog" id="dlgOffline">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="offline">Offline</h1>
            <p data-i18n="offline-description">You are offline. To continue using the bugtracker, connect to the internet.</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="location.reload();">Reload</a>
            </div>
        </div>
        <div class="dialog" id="dlgDisconnected">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="disconnected">Disconnected</h1>
            <p data-i18n="disconnected-description">You have been disconnected from the server.</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="location.reload();">Reload</a>
            </div>
        </div>
        <div class="dialog" id="dlgLoginRequired">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="log-in">Log In</h1>
            <p data-i18n="log-in-required-description">You'll need to log in to perform this action.</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="login();" data-i18n="log-in">Log In</a>
                <a href="#" class="button" onclick="dismissDialog('dlgLoginRequired');" data-i18n="cancel">Cancel</a>
            </div>
        </div>
        <div class="dialog" id="dlgGenericOkWarning">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 id="genericOkWarningTitle">Title</h1>
            <p id="genericOkWarningText">Text</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="dismissDialog('dlgGenericOkWarning');">OK</a>
            </div>
        </div>
        <div class="dialog" id="dlgLogin">
            <iframe src="/app/login.html" id="loginiFrame"></iframe>
        </div>
        <div class="dialog noicon" id="dlgEdit">
            <div id="dlgEditWrapper">
                <h1 data-i18n="edit-comment">Edit Comment</h1>
                <p data-i18n="edit-comment-description">How would you like to amend your comment?</p>
                <textarea id="editCommentText" placeholder="Write a comment..." style="width: 100%;"></textarea>
                <div class="buttonBar" style="margin-top: 6px;">
                    <a href="#" class="button" onclick="editCommentCommit()" data-i18n="edit">Edit</a>
                    <span class="spacer"></span>
                    <a href="#" class="button" onclick="dismissDialog('dlgEdit');" data-i18n="cancel">Cancel</a>
                </div>
            </div>
        </div>
        <div class="dialog noicon" id="dlgUserManagement">
            <h1 data-i18n="user-management">User Management</h1>
            <p id="userManagementUsername">Hello $1! What would you like to do today?</p>
            <span class="spacer"></span>
            <a href="#" class="button" onclick="dismissDialog('dlgUserManagement'); showDialog('dlgProfileSettings')" data-i18n="profile-and-account">Profile and Account</a>
            <a href="#" class="button" onclick="dismissDialog('dlgUserManagement'); showDialog('dlg2fa')" data-i18n="2fa">Two Factor Authentication</a>
            <a href="#" class="button destructive" onclick="dismissDialog('dlgUserManagement'); $('#deleteAccountError').removeClass('show'); showDialog('dlgDeleteAccount')" data-i18n="delete-my-account">Delete my Account</a>
            <div class="buttonBar" style="margin-top: 6px;">
                <a href="#" class="button" onclick="dismissDialog('dlgUserManagement');" data-i18n="done">Done</a>
                <span class="spacer"></span>
                <a href="#" class="button" onclick="dismissDialog('dlgUserManagement'); showDialog('dlgLogout')" data-i18n="log-out">Log Out</a>
            </div>
        </div>
        <div class="dialog" id="dlgProfileSettings">
            <iframe src="/app/usersettings.html" id="usersettingsiframe"></iframe>
        </div>
        <div class="dialog" id="dlgLogout">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="log-out">Log Out</h1>
            <p data-i18n="log-out-confirmation">Do you want to log out of your account?</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="logout();" data-i18n="log-out">Log Out</a>
                <a href="#" class="button" onclick="dismissDialog('dlgLogout');showDialog('dlgUserManagement');" data-i18n="cancel">Cancel</a>
            </div>
        </div>
        <div class="dialog noicon" id="dlgDeleteAccount">
            <h1 data-i18n="delete-account">Delete Account</h1>
            <p data-i18n="delete-account-intro">Here's what's going to happen</p>
            <ul>
                <li data-i18n="delete-account-1">You will no longer be able to log in</li>
                <li data-i18n="delete-account-2">You will no longer be able to file new tickets</li>
                <li data-i18n="delete-account-3">You will no longer be able to participate in comments</li>
                <li data-i18n="delete-account-4">Your current username and email address will be available for use by new accounts</li>
                <li data-i18n="delete-account-5">Your comments and existing tickets will not be deleted</li>
            </ul>
            <p data-i18n="delete-account-confirmation">If you're sure you want to delete your account, enter your password below to confirm that it's you.</p>
            <input type="password" id="deleteAccountPassword" autocomplete="new-password" style="width: 100%;"/>
            <span class="error" id="deleteAccountError" data-i18n="delete-account-error">That didn't work. Try entering your password again.</span>
            <p style="font-weight: bold;" data-i18n="delete-account-warning">WARNING: This is the final step. Your account will be deleted after you click "Delete my account."</p>
            <div class="buttonBar">
                <a href="#" class="button destructive" onclick="deleteAccount();" data-i18n="delete-my-account">Delete my account</a>
                <a href="#" class="button" onclick="dismissDialog('dlgDeleteAccount');showDialog('dlgUserManagement');" data-i18n="cancel">Cancel</a>
            </div>
        </div>
        <div class="dialog" id="dlg2fa">
            <iframe src="/app/2fa.html" id="2faiFrame"></iframe>
        </div>
        <div class="dialog" id="dlgLink">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="obfuscated-link">Obfuscated Link</h1>
            <p data-i18n="obfuscated-link-description">Links from other people can be dangerous. The link you clicked on will go to the following address:</p>
            <pre id="linkDialogLink"></pre>
            <p data-i18n="obfuscated-link-confirmation">Do you want to visit this site?</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="visitObfuscatedLink()" data-i18n="visit">Visit</a>
                <a href="#" class="button" onclick="dismissDialog('dlgLink');" data-i18n="cancel">Cancel</a>
            </div>
        </div>
        <div class="dialog" id="dlgRatelimit">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="rate-limited">You are being rate limited</h1>
            <p id="ratelimitReset">Your rate limit resets on $1.</p>
            <p data-i18n="rate-limited-description">Reload the page after that time to continue using the bugtracker.</p>
        </div>
        <div class="dialog" id="dlgVerificationNeeded">
            <img src="/images/dialog-warning.svg" class="icon" />
            <h1 data-i18n="verification-needed">Your email needs to be verified.</h1>
            <p data-i18n="verification-needed-1">You won't be able to receive any emails from the bug tracker while your email is not verified.</p>
            <p data-i18n="verification-needed-2">To verify your email, find the verification link in your inbox. If you can't find it, you may want to check your spam folder.</p>
            <p id=verificationNeededEmail>If you need the link resent, please send an email to <a href="mailto:hello@vicr123.com">hello@vicr123.com</a>.</p>
            <div class="buttonBar">
                <a href="#" class="button" onclick="dismissDialog('dlgVerificationNeeded');" data-i18n="ok">OK</a>
            </div>
        </div>
        <div class="dialog noicon" id="dlgSettings">
            <h1 data-i18n="settings">Settings</h1>
            <p data-i18n="settings-intro">Configure the bugtracker</p>
            <h3 data-i18n="settings-language">Language</h3>
            <select id="languageSelect">
                <option value="en">English</option>
                <option value="vi">Tiếng Việt</option>
            </select>
            <div class="buttonBar">
                <a href="#" class="button" onclick="dismissDialog('dlgSettings');" data-i18n="done">Done</a>
            </div>
        </div>
        
        <script>
            //Check for compatibility
            if (typeof(Storage) === "undefined") {
                window.location = "/";
            }
        </script>
    </body>
</html>
